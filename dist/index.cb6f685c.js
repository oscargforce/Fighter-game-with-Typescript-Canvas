const t={canvasWidth:1750,canvasHeight:900,gravity:.7,runSpeed:5,jumpSpeed:20,playerWidth:50,playerHeight:150,gameTimeInSeconds:20,wizardDmg:3,warriorDmg:3};class e{constructor(e){this.position=e.position,this.velocity=e.velocity,this.lastKey="",this.playerImageHeight=150,this.gravity=t.gravity,this.fighter=e}keys={a:{pressed:!1},d:{pressed:!1},arrowLeft:{pressed:!1},arrowRight:{pressed:!1},w:{pressed:!1},arrowUp:{pressed:!1}};falling(){this.position.y+=this.velocity.y,this.position.y+this.playerImageHeight+this.velocity.y>=t.canvasHeight-300?this.velocity.y=0:this.velocity.y+=this.gravity}runToTheRight(){this.position.x+=this.velocity.x}runToTheLeft(){this.position.x-=this.velocity.x}jump(){this.velocity.y=-t.jumpSpeed}update(){this.falling(),this.keys.d.pressed&&"d"===this.lastKey?(this.runToTheRight(),this.fighter.switchSprite("run")):this.keys.a.pressed&&"a"===this.lastKey||this.keys.arrowLeft.pressed&&"ArrowLeft"===this.lastKey?(this.runToTheLeft(),this.fighter.switchSprite("run")):this.keys.arrowRight&&"ArrowRight"===this.lastKey?(this.runToTheRight(),this.fighter.switchSprite("run")):this.fighter.switchSprite("idle"),this.velocity.y<0?this.fighter.switchSprite("jump"):this.velocity.y>0&&this.fighter.switchSprite("fall")}movePlayer(t){switch(t.key){case"d":this.keys.d.pressed=!0,this.lastKey="d";break;case"a":this.keys.a.pressed=!0,this.lastKey="a";break;case"w":this.jump()}}stopMovingPlayer(t){switch(t.key){case"d":case"a":this.keys.d.pressed=!1,this.lastKey=""}}moveEnemy(t){switch(t.key){case"ArrowRight":this.keys.arrowRight.pressed=!0,this.lastKey="ArrowRight";break;case"ArrowLeft":this.keys.arrowLeft.pressed=!0,this.lastKey="ArrowLeft";break;case"ArrowUp":this.jump()}}stopMovingEnemy(t){switch(t.key){case"ArrowRight":this.keys.arrowRight.pressed=!1,this.lastKey="";break;case"ArrowLeft":this.keys.arrowLeft.pressed=!1,this.lastKey=""}}}class i{constructor(t){this.position=t.position,this.image=new Image,this.image.src=t.imgSrc,this.numOfFrames=t.numOfFrames,this.scale=t.scale?t.scale:1,this.slowDownAnimation=5,this.currentFrame=0,this.elapsedFrames=0,this.imageOffset=t.offset?t.offset:{x:0,y:0}}draw(){n.drawImage(this.image,this.currentFrame*(this.image.width/this.numOfFrames),0,this.image.width/this.numOfFrames,this.image.height,this.position.x-this.imageOffset.x,this.position.y-this.imageOffset.y,this.image.width/this.numOfFrames*this.scale,this.image.height*this.scale)}animateFrames(){this.elapsedFrames++,this.elapsedFrames%this.slowDownAnimation==0&&(this.currentFrame<this.numOfFrames-1?this.currentFrame++:this.currentFrame=0)}update(){this.draw(),this.animateFrames()}}class s extends i{constructor(i){super(i),this.velocity={x:t.runSpeed,y:t.jumpSpeed},this.movements=new e(this),this.sprites=i.sprites,this.isAttacking=!1,this.attackBox={width:i.attackBox.width,height:i.attackBox.height,offset:i.attackBox.offset,position:{x:this.position.x,y:this.position.y}},this.health=100,this.dead=!1;for(const t in this.sprites)this.sprites[t].image=new Image,this.sprites[t].image.src=this.sprites[t].imgSrc}isDead(){return this.health<=0}update(){this.draw(),this.movements.update(),this.dead||this.animateFrames(),this.attackBox.position.x=this.position.x+this.attackBox.offset.x,this.attackBox.position.y=this.position.y+this.attackBox.offset.y,this.position.x<=0&&(this.position.x=0),this.position.x+t.playerWidth>=t.canvasWidth&&(this.position.x=t.canvasWidth-t.playerWidth),this.position.y+t.playerHeight<=0&&(this.position.y=0-t.playerHeight,this.movements.falling())}attack(){this.isAttacking=!0,this.switchSprite("attack")}switchSprite(t){if(this.image!==this.sprites.death.image){if(!(this.image===this.sprites.takeHit.image&&this.currentFrame<this.sprites.takeHit.numOfFrames-1||this.image===this.sprites.attack.image&&this.currentFrame<this.sprites.attack.numOfFrames-1))switch(t){case"idle":this.setImage("idle");break;case"attack":this.setImage("attack");break;case"run":this.setImage("run");break;case"jump":this.setImage("jump");break;case"fall":this.setImage("fall");break;case"takeHit":this.setImage("takeHit");break;case"death":this.setImage("death")}}else this.currentFrame===this.sprites.death.numOfFrames-1&&(this.dead=!0)}setImage(t){this.sprites?.[t]&&this.image!=this.sprites[t].image&&(this.image=this.sprites[t].image,this.numOfFrames=this.sprites[t].numOfFrames,this.currentFrame=0)}}function a(e,i){return function(t,e){return t.attackBox.position.x+t.attackBox.width>=e.position.x}(e,i)&&function(e,i){return e.attackBox.position.x<=i.position.x+t.playerWidth}(e,i)&&function(e,i){return e.attackBox.position.y+e.attackBox.height>=i.position.y&&e.attackBox.position.y<=i.position.y+(t.playerHeight+i.image.height)}(e,i)}function r(t,e){return t.isAttacking&&t.currentFrame===e}const h=document.getElementById("gameWindow"),n=h.getContext("2d");h.width=t.canvasWidth,h.height=t.canvasHeight,n.fillRect(0,0,h.width,h.height);const m=new i({imgSrc:"images/Battleground3.png",numOfFrames:1,position:{x:0,y:0}}),o=new s({imgSrc:"images/Evil-Wizard/idle.png",numOfFrames:8,offset:{x:200,y:0},position:{x:0,y:0},scale:3,sprites:{idle:{numOfFrames:8,imgSrc:"images/Evil-Wizard/Idle.png"},attack:{numOfFrames:8,imgSrc:"images/Evil-Wizard/Attack.png"},run:{numOfFrames:8,imgSrc:"images/Evil-Wizard/Move.png"},takeHit:{numOfFrames:4,imgSrc:"images/Evil-Wizard/Take-Hit.png"},death:{numOfFrames:5,imgSrc:"images/Evil-Wizard/Death.png"}},attackBox:{height:50,width:175,offset:{x:20,y:200}}}),g=new s({imgSrc:"images/fantasy-warrior/Idle.png",numOfFrames:10,position:{x:600,y:0},offset:{x:200,y:0},scale:3,sprites:{idle:{numOfFrames:10,imgSrc:"images/fantasy-warrior/Idle.png"},attack:{numOfFrames:7,imgSrc:"images/fantasy-warrior/Attack1.png"},run:{numOfFrames:8,imgSrc:"images/fantasy-warrior/Run.png"},jump:{numOfFrames:3,imgSrc:"images/fantasy-warrior/Jump.png"},fall:{numOfFrames:3,imgSrc:"images/fantasy-warrior/Fall.png"},takeHit:{numOfFrames:3,imgSrc:"images/fantasy-warrior/Take-Hit.png"},death:{numOfFrames:7,imgSrc:"images/fantasy-warrior/Death.png"}},attackBox:{height:40,width:130,offset:{x:-95,y:200}}}),c=new class{constructor(e,i){this.timerElement=document.getElementById("timer"),this.gameResultElement=document.getElementById("game-result"),this.timerElement.textContent=`${t.gameTimeInSeconds}`,this.wizard=e,this.warrior=i}decreaseGameTime(){t.gameTimeInSeconds>=0?(setTimeout(this.decreaseGameTime.bind(this),1e3),this.timerElement.textContent=""+t.gameTimeInSeconds--):t.gameTimeInSeconds<=0&&this.determineTheWinner()}gameOver(){this.timerElement.textContent="Game Over"}fantasyWarriorWon(){this.gameResultElement.textContent="Fantasy warrior won!",this.gameResultElement.style.display="flex"}wizardWon(){this.gameResultElement.textContent="The evil wizard won!",this.gameResultElement.style.display="flex"}tiedGame(){this.gameResultElement.textContent="Its a tie!",this.gameResultElement.style.display="flex"}determineTheWinner(){this.gameOver(),this.wizard.health===this.warrior.health?this.tiedGame():this.wizard.health<this.warrior.health?this.fantasyWarriorWon():this.wizard.health>this.warrior.health&&this.wizardWon()}}(o,g);!function e(){window.requestAnimationFrame(e),m.update(),o.update(),g.update(),a(o,g)&&o.isAttacking&&(o.isAttacking=!1,g.isDead()?g.switchSprite("death"):g.switchSprite("takeHit"),document.getElementById("enemy-health-left").style.width=(g.health-=t.wizardDmg)+"%"),a(g,o)&&g.isAttacking&&(g.isAttacking=!1,o.isDead()?o.switchSprite("death"):o.switchSprite("takeHit"),document.getElementById("player-health-left").style.width=(o.health-=t.warriorDmg)+"%"),r(g,6)&&(g.isAttacking=!1),r(o,7)&&(o.isAttacking=!1),(g.isDead()||o.isDead())&&c.determineTheWinner()}(),c.decreaseGameTime(),window.addEventListener("keydown",(t=>{o.dead||(o.movements.movePlayer(t),"s"===t.key&&o.attack()),g.dead||(g.movements.moveEnemy(t),"ArrowDown"===t.key&&g.attack())})),window.addEventListener("keyup",(t=>{o.movements.stopMovingPlayer(t),g.movements.stopMovingEnemy(t)}));
//# sourceMappingURL=index.cb6f685c.js.map
